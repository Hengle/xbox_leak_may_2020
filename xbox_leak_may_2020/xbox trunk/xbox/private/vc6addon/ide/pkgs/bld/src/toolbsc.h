//
// Common Browser Database Make Tool
//
// [v-danwh],[matthewt]
//

#ifndef _INCLUDE_TOOLBSC_CMN_H
#define _INCLUDE_TOOLBSC_CMN_H

#include "schmztl.h"			// the CSchmoozeTool class
#include "optnbsc.h"		// our COMMON bscmake tool options

extern BLD_IFACE CSchmoozeTool::SchmoozeData g_schdataBscmake;

class CBscmakeTool : public CSchmoozeTool
{
	DECLARE_DYNAMIC (CBscmakeTool)

	virtual const SchmoozeData& GetMacs () const {return g_schdataBscmake;}

public:
	CBscmakeTool();

	// -> from CBuildTool
	// Return the files generated by the linker tool
	virtual BOOL GenerateOutput(UINT type, CActionSlobList & actions, CErrorContext & EC);
 
 	// Affects our output?
	virtual BOOL AffectsOutput(UINT idProp);

 	// Generate command lines for the browser database maker
	BOOL GetCommandLines(CActionSlobList &, CPtrList &, DWORD, CErrorContext &);
	UINT PerformBuildActions(UINT type, UINT stage, CActionSlobList & lstActions,
							 DWORD aob, CErrorContext & EC);

	virtual DAB DeferredAction(CActionSlob * pAction, CString * pstrAction = (CString *)NULL);
	virtual BOOL SetDeferredAction(CActionSlob * pAction, DAB dab);
	// <- from CBuildTool

	virtual BOOL IsConsumableFile(const CPath *pPath);	
	// Filter function to pick files this item migth make:
	virtual BOOL IsProductFile(const CPath *pPath);
};

#endif // _INCLUDE_TOOLBSC_CMN_H

