
/****************************************************************************
              Copyright (C) 1992, Microsoft Corporation
Method:              cl strdup2.c
                     strdup2
Switches:            NONE
Hard/Soft Needs:
Abstract:            This test verifies the _strdup() function.
OS Version           REAL/PROT/ALL
CPU:                 8086
Dependencies:        NONE
Environment Vars:    NONE
Verification Method: COMPILE/EXECUTE/COMPARE
Notes:               Must include STRING.H
                     Tests decribed in the testplan STRING.DOC
Products:            C800
Test Type:       DEPTH

Revision History:
 Date              emailname      description
---------------------------------------------------------------------------
 [ 0] 28-May-92    edv            created

---------------------------------------------------------------------------
EndHeader:
*****************************************************************************/

#include <string.h>
#include <test.h>

static char test[] = __FILE__;
static int perfect;



#define LEN1   31
#define LEN2   55
#define LEN3   53
#define LEN4  258
#define LEN5 2007



static char str1[32]  =  "123456789012345678901234567890\0";
static char str2[97]  =  "abcdefghijklmnopqrstuvwxyz**ABCDEFGHIJKLMNOPQRSTUVWXYZ\0";
static char str3[128] =  "êëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑¬√ƒ≈∆«»… ÀÃÕ\0";
static char str4[500] =  { "-:-{}-[]-()-<>-:-{}-[]-()-<>-:-{}-[]-()-<>-:-{}-[]-+"
                    "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"
                    "123456789012345678901234567890\"~!@#$%^&*()_+=-/.,?>"
                    "êëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑¬√ƒ≈∆«»… ÀÃÕ"
                    "Œœ–—“”‘’÷◊ÿŸ⁄Th€‹›ﬁﬂTh·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛ123456789\0"
                    "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
                  };
static char str5[2048] = { "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "12345678901234567890123456789012345678901234567890"
                    "123456\0"
                 };



int strdup2Entry(){
    int i;
    char *pstr;


    startest();



/*  Scenario 5: Verify that the function works correctly with larger
                strings.
*/

    pstr = _strdup( str1 );

    for (i = 0; i < LEN1; i++)
        checke( pstr[i], str1[i] );



    pstr = _strdup( str2 );

    for (i = 0; i < LEN2; i++)
        checke( pstr[i], str2[i] );



    pstr = _strdup( str3 );

    for (i = 0; i < LEN3; i++)
        checke( pstr[i], str3[i] );



    pstr = _strdup( str4 );

    for (i = 0; i < LEN4; i++)
        checke( pstr[i], str4[i] );



    pstr = _strdup( str5 );

    for (i = 0; i < LEN5; i++)
        checke( pstr[i], str5[i] );





    finish();
}
