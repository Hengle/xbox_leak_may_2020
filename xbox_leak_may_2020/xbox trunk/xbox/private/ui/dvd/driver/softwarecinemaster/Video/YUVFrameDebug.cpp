////////////////////////////////////////////////////////////////////////////////
//                                                                            //
// Copyright 2000-2001 STMicroelectronics, Inc.  All Rights Reserved.         //
// HIGHLY CONFIDENTIAL INFORMATION:  This source code contains                //
// confidential and proprietary information of STMicroelectronics, Inc.       //
// This source code is provided to Microsoft Corporation under a written      //
// confidentiality agreement between STMicroelectronics and Microsoft.  This  //
// software may not be reproduced, distributed, modified, disclosed, used,    //
// displayed, stored in a retrieval system or transmitted in whole or in part,//
// in any form or by any means, electronic, mechanical, photocopying or       //
// otherwise, except as expressly authorized by STMicroelectronics. THE ONLY  //
// PERSONS WHO MAY HAVE ACCESS TO THIS SOFTWARE ARE THOSE PERSONS             //
// AUTHORIZED BY RAVISENT, WHO HAVE EXECUTED AND DELIVERED A                  //
// WRITTEN CONFIDENTIALITY AGREEMENT TO STMicroelectronics, IN THE FORM       //
// PRESCRIBED BY STMicroelectronics.                                          //
//                                                                            //
////////////////////////////////////////////////////////////////////////////////

#include "YUVFrameDebug.h"

static BYTE CSet[] = {
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........

                      0x00,   // ........
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x00,   // ........
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x00,   // ........

                      0x00,   // ........
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x22,   // ..#...#.
                      0x44,   // .#...#..
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........

                      0x00,   // ........
                      0x36,   // ..##.##.
                      0x36,   // ..##.##.
                      0x7f,   // .#######
                      0x7e,   // .######.
                      0xfe,   // #######.
                      0x6c,   // .##.##..
                      0x6c,   // .##.##..
                      0x00,   // ........

                      0x00,   // ........
                      0x18,   // ...##...
                      0x3e,   // ..#####.
                      0x60,   // .##.....
                      0x3c,   // ..####..
                      0x06,   // .....##.
                      0x7c,   // .#####..
                      0x18,   // ...##...
                      0x00,   // ........

                      0x00,   // ........
                      0x60,   // .##.....
                      0x66,   // .##..##.
                      0x0c,   // ....##..
                      0x18,   // ...##...
                      0x30,   // ..##....
                      0x66,   // .##..##.
                      0x06,   // .....##.
                      0x00,   // ........

                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........

                      0x00,   // ........
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x08,   // ....#...
                      0x10,   // ...#....
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........

                      0x00,   // ........
                      0x0c,   // ....##..
                      0x18,   // ...##...
                      0x30,   // ..##....
                      0x30,   // ..##....
                      0x30,   // ..##....
                      0x18,   // ...##...
                      0x0c,   // ....##..
                      0x00,   // ........

                      0x00,   // ........
                      0x30,   // ..##....
                      0x18,   // ...##...
                      0x0c,   // ....##..
                      0x0c,   // ....##..
                      0x0c,   // ....##..
                      0x18,   // ...##...
                      0x30,   // ..##....
                      0x00,   // ........

                      0x00,   // ........
                      0x00,   // ........
                      0x18,   // ...##...
                      0x7e,   // .######.
                      0x3c,   // ..####..
                      0x66,   // .##..##.
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........

                      0x00,   // ........
                      0x00,   // ........
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x7e,   // .######.
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x00,   // ........
                      0x00,   // ........

                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x10,   // ...#....
                      0x00,   // ........

                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x7e,   // .######.
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........

                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x00,   // ........

                      0x00,   // ........
                      0x06,   // .....##.
                      0x06,   // .....##.
                      0x0c,   // ....##..
                      0x18,   // ...##...
                      0x30,   // ..##....
                      0x60,   // .##.....
                      0x60,   // .##.....
                      0x00,   // ........

                      0x00,	// ........
                      0x3c,	// ..####..
							 0x66,	// .##..##.
                      0x66,	// .##.###.
                      0x66,	// .######.
                      0x66,	// .###.##.
                      0x66,	// .##..##.
							 0x3c,	// ..####..
                      0x00,	// ........

                      0x00,	// ........
                      0x18,	// ...##...
							 0x38,	// ..###...
                      0x78,	// .####...
                      0x18,	// ...##...
                      0x18,	// ...##...
                      0x18,	// ...##...
							 0x7e,	// .######.
                      0x00,	// ........

                      0x00,	// ........
                      0x3c,	// ..####..
							 0x66,	// .##..##.
                      0x06,	// .....##.
                      0x3c,	// ..####..
                      0x60,	// .##.....
                      0x60,	// .##.....
							 0x7e,	// .######.
                      0x00,	// ........

                      0x00,	// ........
                      0x3c,	// ..####..
							 0x66,	// .##..##.
							 0x06,	// .....##.
                      0x1c,	// ...###..
                      0x06,	// .....##.
                      0x66,	// .##..##.
							 0x3c,	// ..####..
                      0x00,	// ........

                      0x00,	// ........
                      0x1c,	// ...###..
							 0x3c,	// ..####..
                      0x6c,	// .##.##..
                      0x6c,	// .##.##..
                      0x7e,	// .######.
                      0x0c,	// ....##..
							 0x0c,	// ....##..
                      0x00,	// ........

                      0x00,	// ........
                      0x7e,	// .######.
							 0x60,	// .##.....
							 0x60,	// .##.....
                      0x7e,	// .#####..
                      0x06,	// .....##.
                      0x66,	// .##..##.
							 0x3c,	// ..####..
                      0x00,	// ........

                      0x00,	// ........
                      0x3c,	// ..####..
							 0x66,	// .##..##.
							 0x60,	// .##.....
                      0x7c,	// .#####..
                      0x66,	// .##..##.
                      0x66,	// .##..##.
							 0x3c,	// ..####..
                      0x00,	// ........

                      0x00,	// ........
                      0x7e,	// .######.
							 0x06,	// .....##.
                      0x0c,	// ....##..
                      0x18,	// ...##...
                      0x18,	// ...##...
                      0x18,	// ...##...
							 0x18,	// ...##...
                      0x00,	// ........

                      0x00,	// ........
                      0x3c,	// ..####..
							 0x66,	// .##..##.
							 0x66,	// .##..##.
                      0x3c,	// ..####..
                      0x66,	// .##..##.
                      0x66,	// .##..##.
							 0x3c,	// ..####..
                      0x00,	// ........

                      0x00,	// ........
                      0x3c,	// ..####..
							 0x66,	// .##..##.
							 0x66,	// .##..##.
                      0x3e,	// ..#####.
                      0x06,	// .....##.
                      0x66,	// .##..##.
							 0x3c,	// ..####..
                      0x00,	// ........

                      0x00,   // ........
                      0x00,   // ........
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x00,   // ........
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x00,   // ........
                      0x00,   // ........

                      0x00,   // ........
                      0x00,   // ........
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x00,   // ........
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x10,   // ...#....
                      0x00,   // ........

                      0x00,   // ........
                      0x00,   // ........
                      0x06,   // .....##.
                      0x18,   // ...##...
                      0x60,   // .##.....
                      0x18,   // ...##...
                      0x06,   // .....##.
                      0x00,   // ........
                      0x00,   // ........

                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x7e,   // .######.
                      0x00,   // ........
                      0x7e,   // .######.
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........

                      0x00,   // ........
                      0x00,   // ........
                      0x60,   // .##.....
                      0x18,   // ...##...
                      0x06,   // .....##.
                      0x18,   // ...##...
                      0x60,   // .##.....
                      0x00,   // ........
                      0x00,   // ........

                      0x00,   // ........
                      0x3c,   // ..####..
                      0x66,   // .##..##.
                      0x06,   // .....##.
                      0x0c,   // ....##..
                      0x18,   // ...##...
                      0x00,   // ........
                      0x18,   // ...##...
                      0x00,	// ........

                      0x00,   // ........
                      0x3c,   // ..####..
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x6e,   // .##.###.
                      0x6e,   // .##.###.
                      0x60,   // .##.....
                      0x3c,   // ..####..
                      0x00,   // ........

                      0x00,   // ........
                      0x18,   // ...##...
                      0x3c,   // ..####..
                      0x66,   // .##..##.
                      0x7e,   // .######.
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x00,   // ........

                      0x00,   // ........
                      0x7c,   // .#####..
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x7c,   // .#####..
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x7c,   // .#####..
                      0x00,   // ........

                      0x00,   // ........
                      0x3c,   // ..####..
                      0x66,   // .##..##.
                      0x60,   // .##.....
                      0x60,   // .##.....
                      0x60,   // .##.....
                      0x66,   // .##..##.
                      0x3c,   // ..####..
                      0x00,   // ........

                      0x00,   // ........
                      0x7c,   // .#####..
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x7c,   // .#####..
                      0x00,   // ........

                      0x00,   // ........
                      0x7e,   // .######.
                      0x60,   // .##.....
                      0x60,   // .##.....
                      0x7c,   // .#####..
                      0x60,   // .##.....
                      0x60,   // .##.....
                      0x7e,   // .######.
                      0x00,   // ........

                      0x00,   // ........
                      0x7e,   // .######.
                      0x60,   // .##.....
                      0x60,   // .##.....
                      0x7c,   // .#####..
                      0x60,   // .##.....
                      0x60,   // .##.....
                      0x60,   // .##.....
                      0x00,   // ........

                      0x00,   // ........
                      0x3c,   // ..####..
                      0x60,   // .##.....
                      0x60,   // .##.....
                      0x6e,   // .##.###.
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x3c,   // ..####..
                      0x00,   // ........

                      0x00,   // ........
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x7e,   // .######.
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x00,   // ........

                      0x00,   // ........
                      0x3c,   // ..####..
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x3c,   // ..####..
                      0x00,   // ........

                      0x00,   // ........
                      0x7e,   // .######.
                      0x06,   // .....##.
                      0x06,   // .....##.
                      0x06,   // .....##.
                      0x06,   // .....##.
                      0x66,   // .##..##.
                      0x3c,   // ..####..
                      0x00,   // ........

                      0x00,   // ........
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x6c,   // .##.##..
                      0x78,   // .####...
                      0x6c,   // .##.##..
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x00,   // ........

                      0x00,   // ........
                      0x60,   // .##.....
                      0x60,   // .##.....
                      0x60,   // .##.....
                      0x60,   // .##.....
                      0x60,   // .##.....
                      0x60,   // .##.....
                      0x7e,   // .######.
                      0x00,   // ........

                      0x00,   // ........
                      0x63,   // .##...##
                      0x77,   // .###.###
                      0x7f,   // .#######
                      0x6b,   // .##.#.##
                      0x63,   // .##...##
                      0x63,   // .##...##
                      0x63,   // .##...##
                      0x00,   // ........

                      0x00,   // ........
                      0x66,   // .##..##.
                      0x76,   // .###.##.
                      0x7e,   // .######.
                      0x7e,   // .######.
                      0x6e,   // .##.###.
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x00,   // ........

                      0x00,   // ........
                      0x3c,   // ..####..
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x3c,   // ..####..
                      0x00,   // ........

                      0x00,   // ........
                      0x7c,   // .#####..
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x7c,   // .#####..
                      0x60,   // .##.....
                      0x60,   // .##.....
                      0x60,   // .##.....
                      0x00,   // ........

                      0x00,   // ........
                      0x3c,   // ..####..
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x6c,   // .##.##..
                      0x36,   // ..##.##.
                      0x00,   // ........

                      0x00,   // ........
                      0x7c,   // .#####..
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x7c,   // .#####..
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x00,   // ........

                      0x00,   // ........
                      0x3c,   // ..####..
                      0x66,   // .##..##.
                      0x60,   // .##.....
                      0x3c,   // ..####..
                      0x06,   // .....##.
                      0x66,   // .##..##.
                      0x3c,   // ..####..
                      0x00,   // ........

                      0x00,   // ........
                      0x7e,   // .######.
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x00,   // ........

                      0x00,   // ........
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x3c,   // ..####..
                      0x00,   // ........

                      0x00,   // ........
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x7e,   // .######.
                      0x3c,   // ..####..
                      0x18,   // ...##...
                      0x00,   // ........

                      0x00,   // ........
                      0x63,   // .##...##
                      0x63,   // .##...##
                      0x63,   // .##...##
                      0x6b,   // .##.#.##
                      0x7f,   // .#######
                      0x77,   // .###.###
                      0x63,   // .##...##
                      0x00,   // ........

                      0x00,   // ........
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x7e,   // .######.
                      0x3c,   // ..####..
                      0x7e,   // .######.
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x00,   // ........

                      0x00,   // ........
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x3c,   // ..####..
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x00,   // ........

                      0x00,   // ........
                      0x7e,   // .######.
                      0x06,   // .....##.
                      0x0c,   // ....##..
                      0x18,   // ...##...
                      0x30,   // ..##....
                      0x60,   // .##.....
                      0x7e,   // .######.
                      0x00,   // ........

                      0x00,   // ........
                      0x3c,   // ..####..
                      0x30,   // ..##....
                      0x30,   // ..##....
                      0x30,   // ..##....
                      0x30,   // ..##....
                      0x30,   // ..##....
                      0x3c,   // ..####..
                      0x00,   // ........

                      0x00,   // ........
                      0x60,   // .##.....
                      0x60,   // .##.....
                      0x30,   // ..##....
                      0x18,   // ...##...
                      0x0c,   // ....##..
                      0x06,   // .....##.
                      0x06,   // .....##.
                      0x00,   // ........

                      0x00,   // ........
                      0x3c,   // ..####..
                      0x0c,   // ....##..
                      0x0c,   // ....##..
                      0x0c,   // ....##..
                      0x0c,   // ....##..
                      0x0c,   // ....##..
                      0x3c,   // ..####..
                      0x00,   // ........

                      0x00,   // ........
                      0x18,   // ...##...
                      0x3c,   // ..####..
                      0x66,   // .##..##.
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........

                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0xff,   // ########

                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x08,   // ....#...
                      0x10,   // ...#....
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........

                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x3c,   // ..####..
                      0x06,   // .....##.
                      0x3e,   // ..#####.
                      0x66,   // .##..##.
                      0x3a,   // ..###.#.
                      0x00,   // ........

                      0x00,   // ........
                      0x60,   // .##.....
                      0x60,   // .##.....
                      0x60,   // .##.....
                      0x7c,   // .#####..
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x7c,   // .#####..
                      0x00,   // ........

                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x3c,   // ..####..
                      0x66,   // .##..##.
                      0x60,   // .##.....
                      0x66,   // .##..##.
                      0x3c,   // ..####..
                      0x00,   // ........

                      0x00,   // ........
                      0x06,   // .....##.
                      0x06,   // .....##.
                      0x06,   // .....##.
                      0x3e,   // ..#####.
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x3e,   // ..#####.
                      0x00,   // ........

                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x3c,   // ..####..
                      0x66,   // .##..##.
                      0x7e,   // .######.
                      0x60,   // .##.....
                      0x3c,   // ..####..
                      0x00,   // ........

                      0x00,   // ........
                      0x0c,   // ....##..
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x7e,   // .######.
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x00,   // ........

                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x3a,   // ..###.#.
                      0x66,   // .##..##.
                      0x3e,   // ..#####.
                      0x06,   // .....##.
                      0x3c,   // ..####..

                      0x00,   // ........
                      0x60,   // .##.....
                      0x60,   // .##.....
                      0x60,   // .##.....
                      0x7c,   // .#####..
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x00,   // ........

                      0x00,   // ........
                      0x00,   // ........
                      0x18,   // ...##...
                      0x00,   // ........
                      0x38,   // ..###...
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x3c,   // ..####..
                      0x00,   // ........

                      0x00,   // ........
                      0x00,   // ........
                      0x18,   // ...##...
                      0x00,   // ........
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x30,   // ..##....

                      0x00,   // ........
                      0x60,   // .##.....
                      0x60,   // .##.....
                      0x66,   // .##..##.
                      0x6c,   // .##.##..
                      0x78,   // .####...
                      0x6c,   // .##.##..
                      0x66,   // .##..##.
                      0x00,   // ........

                      0x00,   // ........
                      0x30,   // ..##....
                      0x30,   // ..##....
                      0x30,   // ..##....
                      0x30,   // ..##....
                      0x30,   // ..##....
                      0x30,   // ..##....
                      0x18,   // ...##...
                      0x00,   // ........

                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x76,   // .###.##.
                      0x6b,   // .##.#.##
                      0x6b,   // .##.#.##
                      0x6b,   // .##.#.##
                      0x6b,   // .##.#.##
                      0x00,   // ........

                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x7c,   // .#####..
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x00,   // ........

                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x3c,   // ..####..
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x3c,   // ..####..
                      0x00,   // ........

                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x7c,   // .#####..
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x7c,   // .#####..
                      0x60,   // .##.....
                      0x60,   // .##.....

                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x3e,   // ..#####.
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x3e,   // ..#####.
                      0x06,   // .....##.
                      0x06,   // .....##.

                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x2c,   // ..#.##..
                      0x36,   // ..##.##.
                      0x30,   // ..##....
                      0x30,   // ..##....
                      0x30,   // ..##....
                      0x00,   // ........

                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x3c,   // ..####..
                      0x60,   // .##.....
                      0x3c,   // ..####..
                      0x06,   // .....##.
                      0x3c,   // ..####..
                      0x00,   // ........

                      0x00,   // ........
                      0x08,   // ....#...
                      0x18,   // ...##...
                      0x7e,   // .######.
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x0c,   // ....##..
                      0x00,   // ........

                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x3a,   // ..###.#.
                      0x00,   // ........

                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x3c,   // ..####..
                      0x18,   // ...##...
                      0x00,   // ........

                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x63,   // .##...##
                      0x63,   // .##...##
                      0x6b,   // .##.#.##
                      0x7f,   // .#######
                      0x2a,   // ..#.#.#.
                      0x00,   // ........

                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x66,   // .##..##.
                      0x3c,   // ..####..
                      0x18,   // ...##...
                      0x3c,   // ..####..
                      0x66,   // .##..##.
                      0x00,   // ........

                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x66,   // .##..##.
                      0x3e,   // ..#####.
                      0x06,   // .....##.
                      0x1c,   // ...###..

                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x7e,   // .######.
                      0x0c,   // ....##..
                      0x18,   // ...##...
                      0x30,   // ..##....
                      0x7e,   // .######.
                      0x00,   // ........

                      0x00,   // ........
                      0x0c,   // ....##..
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x30,   // ..##....
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x0c,   // ....##..
                      0x00,   // ........

                      0x00,   // ........
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x00,   // ........

                      0x00,   // ........
                      0x30,   // ..##....
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x0c,   // ....##..
                      0x18,   // ...##...
                      0x18,   // ...##...
                      0x30,   // ..##....
                      0x00,   // ........

                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x38,   // ..###...
                      0x6b,   // .##.#.##
                      0x0e,   // ....###.
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........

                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00,   // ........
                      0x00};	// ........

static void PutChar(BYTE * dp, DWORD bpr, char c)
	{
   if ((c < 32) || (c>127)) c = (char)128;

   BYTE * gfx = &(CSet[(c-32) * 9]);
	WORD * wpix = (WORD *)dp;
	int offset = (bpr - 16) >> 1;
	int i, j;
	BYTE shift;

	for(i=0; i<9; i++)
		{
		shift = *gfx++;
		for(j=0; j<8; j++)
			{
			if (shift & 0x80)
				*wpix++ = 0x80ff;
			else
				*wpix++ = 0x8000;
			shift <<= 1;
			}
		wpix+=offset;
		}
   }

void __cdecl YUVD_WriteString(BYTE * yuvp, DWORD bpr, int x, int y, char * format, ...)
	{
	char buffer[256];
	int i;

	wvsprintf(buffer, format, (LPSTR)(&format+1));

	yuvp += 16 * x + bpr * (10 * y);
	i = 0;
	while (buffer[i])
		{
		PutChar(yuvp, bpr, buffer[i]);
		i++;
		yuvp += 16;
		}
	}

static void PutChar2(BYTE * dp, DWORD bpr, char c)
	{
   if ((c < 32) || (c>127)) c = (char)128;

   BYTE * gfx = &(CSet[(c-32) * 9]);
	DWORD * wpix = (DWORD *)dp;
	int offset = (bpr - 32) >> 2;
	int i, j;
	BYTE shift;

	for(i=0; i<9; i++)
		{
		shift = *gfx++;
		for(j=0; j<8; j++)
			{
			if (shift & 0x80)
				*wpix++ = 0x80ff80ff;
			else
				*wpix++ = 0x80008000;
			shift <<= 1;
			}
		wpix+=offset;
		}
   }

void __cdecl YUVD_WriteString2(BYTE * yuvp, DWORD bpr, int x, int y, char * format, ...)
	{
	char buffer[256];
	int i;

	wvsprintf(buffer, format, (LPSTR)(&format+1));

	yuvp += 32 * x + bpr * (20 * y);
	i = 0;
	while (buffer[i])
		{
		PutChar2(yuvp, bpr, buffer[i]);
		i++;
		yuvp += 32;
		}
	}

void YUVD_DrawChart(BYTE * yuvp, DWORD bpr, int x, int y, int w, int h, int l, int * data)
	{
	int ix, iy, iv;
	WORD * wpix = (WORD *)(yuvp + bpr * y) + x;
	int wpr = bpr / 2;

	for(iy = 0; iy<h; iy++)
		{
		iv = data[iy];
		if (iv < 0) iv = 0; else if (iv > w) iv = w;

		if (iv >= l)
			{
			for(ix=0; ix<l; ix++)
				wpix[ix] = 0x8020;
			for(;ix<iv; ix++)
				wpix[ix] = 0x80ff;
			for(;ix<w; ix++)
				wpix[ix] = 0x8020;
			}
		else
			{
			for(ix=0; ix<iv; ix++)
				wpix[ix] = 0x8020;
			for(;ix<l; ix++)
				wpix[ix] = 0x80ff;
			for(;ix<w; ix++)
				wpix[ix] = 0x8020;
			}

		wpix += wpr;
		}
	}

void YUVD_DrawChart2(BYTE * yuvp, DWORD bpr, int x, int y, int w, int h, int l, int * data1, int * data2)
	{
	int ix, iy, iv, iw;
	WORD * wpix = (WORD *)(yuvp + bpr * y) + x;
	int wpr = bpr / 2;

	for(iy = 0; iy<h; iy++)
		{
		iv = data1[iy];
		iw = data2[iy];

		if (iv < 0) iv = 0; else if (iv > w) iv = w;
		if (iw < 0) iw = 0; else if (iw > w) iw = w;

		if      (iw >= iv && iv >= l)
			{
			for(ix=0; ix<l; ix++)
				wpix[ix] = 0x8020;
			for(;ix<iv; ix++)
				wpix[ix] = 0x80ff;
			for(;ix<iw; ix++)
				wpix[ix] = 0x8080;
			for(;ix<w; ix++)
				wpix[ix] = 0x8020;
			}
		else if (iv >= iw && iw >= l)
			{
			for(ix=0; ix<l; ix++)
				wpix[ix] = 0x8020;
			for(;ix<iw; ix++)
				wpix[ix] = 0x8080;
			for(;ix<iv; ix++)
				wpix[ix] = 0x80ff;
			for(;ix<w; ix++)
				wpix[ix] = 0x8020;
			}
		else if (iv >= iw && iv <= l)
			{
			for(ix=0; ix<iw; ix++)
				wpix[ix] = 0x8020;
			for(; ix<iv; ix++)
				wpix[ix] = 0x8080;
			for(;ix<l; ix++)
				wpix[ix] = 0x80ff;
			for(;ix<w; ix++)
				wpix[ix] = 0x8020;
			}
		else if (iw >= iv && iw <= l)
			{
			for(ix=0; ix<iv; ix++)
				wpix[ix] = 0x8020;
			for(; ix<iw; ix++)
				wpix[ix] = 0x80ff;
			for(;ix<l; ix++)
				wpix[ix] = 0x8080;
			for(;ix<w; ix++)
				wpix[ix] = 0x8020;
			}
		else if (iw >= iv)
			{
			for(ix=0; ix<iv; ix++)
				wpix[ix] = 0x8020;
			for(;ix<l; ix++)
				wpix[ix] = 0x80ff;
			for(; ix<iw; ix++)
				wpix[ix] = 0x8080;
			for(;ix<w; ix++)
				wpix[ix] = 0x8020;
			}
		else
			{
			for(ix=0; ix<iw; ix++)
				wpix[ix] = 0x8020;
			for(;ix<l; ix++)
				wpix[ix] = 0x8080;
			for(; ix<iv; ix++)
				wpix[ix] = 0x80ff;
			for(;ix<w; ix++)
				wpix[ix] = 0x8020;
			}

		wpix += wpr;
		}
	}

void YUVD_DrawFlow(BYTE * yuvp, DWORD bpr, int x, int y, int w, int h, int l)
	{
	int ix, iy;
	WORD * wpix = (WORD *)(yuvp + bpr * y) + x;
	int wpr = bpr / 2;
	int dl = 0x10000 / w;
	int wl;

	for(iy = 0; iy<h; iy++)
		{
		wl = l * 0x100 + 0x800000;
		for(ix=0; ix<w; ix++)
			{
			wpix[ix] = wl >> 8;
			wl = (wl + dl) & 0x80ffff;
			}
		wpix += wpr;
		}
	}

#define DIB_HEADER_MARKER     ((WORD) ('M' << 8) | 'B')

static void YUV2RGB(BYTE cy, BYTE cu, BYTE cv, BYTE & cr, BYTE & cg, BYTE & cb)
	{
	int iy = cy;
	int iu = (int)cu - 128;
	int iv = (int)cv - 128;

	int ir = (256 * iy + 351 * iu) >> 8;
	int ig = (256 * iy - 179 * iu - 86 * iv) >> 8;
	int ib = (256 * iy + 443 * iv) >> 8;

	if (ir < 0) cr = 0; else if (ir > 255) cr = 255; else cr = (BYTE)ir;
	if (ig < 0) cg = 0; else if (ig > 255) cg = 255; else cg = (BYTE)ig;
	if (ib < 0) cb = 0; else if (ib > 255) cb = 255; else cb = (BYTE)ib;
	}


typedef struct tagBITMAPINFOHEADER{
        DWORD      biSize;
        LONG       biWidth;
        LONG       biHeight;
        WORD       biPlanes;
        WORD       biBitCount;
        DWORD      biCompression;
        DWORD      biSizeImage;
        LONG       biXPelsPerMeter;
        LONG       biYPelsPerMeter;
        DWORD      biClrUsed;
        DWORD      biClrImportant;
} BITMAPINFOHEADER, FAR *LPBITMAPINFOHEADER, *PBITMAPINFOHEADER;


/* constants for the biCompression field */
#define BI_RGB        0L
#define BI_RLE8       1L
#define BI_RLE4       2L
#define BI_BITFIELDS  3L


#include <pshpack2.h>
typedef struct tagBITMAPFILEHEADER {
        WORD    bfType;
        DWORD   bfSize;
        WORD    bfReserved1;
        WORD    bfReserved2;
        DWORD   bfOffBits;
} BITMAPFILEHEADER, FAR *LPBITMAPFILEHEADER, *PBITMAPFILEHEADER;


void YUVD_SavePicture(BYTE * yuvp, DWORD bpr, int width, int height, char * fname, int no)
	{
	HANDLE file;
	int x, y;
	BYTE rgbline[720 * 3];
	BITMAPFILEHEADER bmfHdr;
	BITMAPINFOHEADER bmih;
	DWORD done;
	BYTE * pp, * dp;
	char dname[100];

	wsprintf(dname, "%s%04d.bmp", fname, no);

	bmih.biSize = sizeof(BITMAPINFOHEADER);
	bmih.biWidth = width;
	bmih.biHeight = height;
	bmih.biPlanes = 1;
	bmih.biBitCount = 24;
	bmih.biCompression = BI_RGB;
	bmih.biSizeImage = width * height * 3;
	bmih.biXPelsPerMeter = 0;
	bmih.biYPelsPerMeter = 0;
	bmih.biClrUsed = 0;
	bmih.biClrImportant = 0;

	bmfHdr.bfType = DIB_HEADER_MARKER;
	bmfHdr.bfSize = bmih.biSize + bmih.biSizeImage + sizeof(BITMAPFILEHEADER);
	bmfHdr.bfReserved1 = 0;
	bmfHdr.bfReserved2 = 0;
	bmfHdr.bfOffBits = (DWORD)sizeof(BITMAPFILEHEADER) + bmih.biSize;

	file = ::CreateFile(dname, GENERIC_WRITE, 0, NULL, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, NULL);
	if (file != INVALID_HANDLE_VALUE)
		{
		::WriteFile(file, &bmfHdr, sizeof(BITMAPFILEHEADER), &done, NULL);
		::WriteFile(file, &bmih, bmih.biSize, &done, NULL);

		for(y=0; y<height; y++)
			{
			pp = yuvp + bpr * (height - y - 1);
			dp = rgbline;

			for(x=0; x<width; x+=2)
				{
				YUV2RGB(pp[0], pp[3], pp[1], dp[2], dp[1], dp[0]);
				YUV2RGB(pp[2], pp[3], pp[1], dp[5], dp[4], dp[3]);

				pp += 4;
				dp += 6;
				}

			::WriteFile(file, rgbline, 3 * width, &done, NULL);
			}


		::CloseHandle(file);
		}
	}

