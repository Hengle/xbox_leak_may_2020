TARGETNAME=usbd
TARGETTYPE=LIBRARY
TARGETPATH=$(BASEDIR)\public\sdk\lib
        
!ifdef DEBUG_USBD
C_DEFINES=$(C_DEFINES) -DDBG_MAX
USER_C_FLAGS=$(USER_C_FLAGS) /FAcs
!endif

!ifdef TRACE_USB_MEMORY_USAGE
C_DEFINES=$(C_DEFINES) -DUSB_TRACE_MEMORY_ALLOCATE_FREE
!endif

!ifndef SILVER
!if "$(USB_HOST_CONTROLLER_CONFIG)"==""
USB_HOST_CONTROLLER_CONFIG=SINGLE
!endif
!endif

!if "$(USB_HOST_CONTROLLER_CONFIG)"=="SINGLE"
C_DEFINES=$(C_DEFINES) -DUSB_HOST_CONTROLLER_CONFIGURATION=1
!endif
!if "$(USB_HOST_CONTROLLER_CONFIG)"=="DUAL_XDK"
C_DEFINES=$(C_DEFINES) -DUSB_HOST_CONTROLLER_CONFIGURATION=2
!endif
!if "$(USB_HOST_CONTROLLER_CONFIG)"==""
C_DEFINES=$(C_DEFINES) -DUSB_HOST_CONTROLLER_CONFIGURATION=2
!endif

!ifndef USB_DISABLE_DIRECT_CONNECT
C_DEFINES=$(C_DEFINES) -DUSB_ENABLE_DIRECT_CONNECT
!endif

MSC_WARNING_LEVEL=/W3

INCLUDES=..\INC;$(BASEDIR)\private\ntos\inc

SOURCES=usbd.cpp\
        usbinit.cpp\
        tree.cpp\
        usbdev.cpp
        
