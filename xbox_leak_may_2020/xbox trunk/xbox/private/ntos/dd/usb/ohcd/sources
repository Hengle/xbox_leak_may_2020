TARGETNAME=ohcd
TARGETTYPE=LIBRARY
TARGETPATH=$(BASEDIR)\public\sdk\lib

C_DEFINES=$(C_DEFINES) -DUSE_DMA_MACROS -DPERFORM_DEVSYS_OPERATIONS

!ifdef DEBUG_OHCD
C_DEFINES=$(C_DEFINES) -DDBG_MAX
USER_C_FLAGS=$(USER_C_FLAGS) /FAcs
!endif

!ifdef TRACE_USB_MEMORY_USAGE
C_DEFINES=$(C_DEFINES) -DUSB_TRACE_MEMORY_ALLOCATE_FREE
!endif

!ifndef EXCLUDE_ISOCHRONOUS_SUPPORT
C_DEFINES=$(C_DEFINES) -DOHCD_ISOCHRONOUS_SUPPORTED
!endif

!ifndef SILVER
C_DEFINES=$(C_DEFINES) -DOHCD_XBOX_HARDWARE_ONLY
!if "$(USB_HOST_CONTROLLER_CONFIG)"==""
USB_HOST_CONTROLLER_CONFIG=SINGLE
!endif
!endif

!if "$(USB_HOST_CONTROLLER_CONFIG)"=="SINGLE"
C_DEFINES=$(C_DEFINES) -DUSB_HOST_CONTROLLER_CONFIGURATION=1
!endif
!if "$(USB_HOST_CONTROLLER_CONFIG)"=="DUAL_XDK"
C_DEFINES=$(C_DEFINES) -DUSB_HOST_CONTROLLER_CONFIGURATION=2
!endif
!if "$(USB_HOST_CONTROLLER_CONFIG)"==""
C_DEFINES=$(C_DEFINES) -DUSB_HOST_CONTROLLER_CONFIGURATION=2
!endif

MSC_WARNING_LEVEL=/W3

INCLUDES=..\inc;$(BASEDIR)\private\ntos\inc;$(DDK_INC_PATH);

SOURCES=DevSys.c\
        pool.c\
        ohcd.c\
        isr.c\
        schedule.c\
        transfer.c\
        roothub.c\
        isoch.c
